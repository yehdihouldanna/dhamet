</DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width ,initial-scale=1">
    <title>Dhamet</title>
    {% load static %}
    {% csrf_token %}
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700&display=swap" />
    <!-- <link
            rel = "stylesheet" 
            type = "text/css"
            href = "{% static 'css/index.css'  %}"
            /> -->
</head>

<body>
   
    
    <div id="main">
        <button id="startbutton" onclick="CreateGameRequest()">Play Online</button>
    </div>
    <!-- <script src = "{% static 'frontend/main.js' %}"></script> -->
    <script>
        function CreateGameRequest() {
            console.log("Starting a game online.")
            const requestOptions =
            {
                method: 'POST',
                // cors: "same-origin",
                // credentials: 'same-origin',
                headers: { 'Content-Type': 'application/json',
                            "X-CSRFToken": '{{ csrf_token }}' },
                body: JSON.stringify({
                    // csrfmiddlewaretoken: '{{ csrf_token }}',
                    id: "",
                    creator: "",
                    opponent: "",

                })
            };
            fetch('/DhametCode/create-game', requestOptions).
                then((response) => response.json()).
                then((data) => {
                    console.log("Created successfully a game who's code is :", data.id)
                    window.location.replace(
                        "http://"+
                        window.location.host
                        + '/game/'
                        + data.id
                        +'/'
                    )
                    
                })
        };
    </script>
</body>

</html>